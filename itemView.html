<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
   <meta name="viewport" content="width=device-width, initial-scale=1"/>
   <title>A style</title>
   <link rel="stylesheet" href="css/main.css"/>
   <link rel="stylesheet" href="css/media.css"/>
   <link rel="stylesheet" href="css/animate.css">
   <link rel="stylesheet" href="css/bootstrap.css">
   <link rel="stylesheet" href="css/sub.css"/>
   <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
   <link href="https://fonts.googleapis.com/css?family=Poiret+One" rel="stylesheet">
   <style>
      #one *{
         margin: 0;
         padding: 0;
      }
 
      #itemImgDiv{
         overflow: hidden;
      }

      #itemImgDiv img{
         max-width: 100%
      }

      #itemImgDiv img:hover{
         transform: scale(1.1);
         cursor: zoom-in;
      }

      #infoDiv{
         height: 100%;
         padding: 30px 50px;
      }

      #buyInfo{
         height: 50%;
         margin-bottom: 50px;
      }

      #itemInfo{
         padding: 30px;
         height: 50%;
         border: 1px solid #cecece;
         clear:both;
         line-height: 20px;
      }

      #buyInfo_1{
         padding-bottom: 10px;
         text-align: center;
      }

      #itemInfo ul{
         padding-left: 10%;
      }
      #itemInfo ul li{
         list-style: disc;
         color: gray;
      }

      #itemName{
         float: left;
      }
      #price{
         float: right;
      }

      #selectDiv{
         margin-bottom: 20px;
      }

      #buyDiv{
         display: flex;
         align-items: center;
      }

      #buyDiv .btn{
         padding: 10px 0;
      }

      #goBack:hover{
         cursor: pointer;
         text-decoration: none;
         color: black;
      }
      #goBack{
         font-size: 20px;
         margin-bottom: 10px;
         color: gray;
         text-decoration: none;
      }

      /*mo*/
      .modal-body{
         margin: 20px 40px 20px 40px;
      }

      table#t01 tr{
         text-align: center;
         height: 40px; 
      }
      table#t01 tr>td:nth-child(1){
         text-align: left;
      }
      table#t01 tr:nth-child(even) {
         background-color: #fff;   
      }
      table#t01 tr:nth-child(odd) {
       background-color: #eee;
      }  

      #myModal{
         margin-top: 100px;
      }

      #likeBtn:hover{
         background-color: rgb(249,234,206);
      }

      .likedBtn{
         background-color: rgb(249,234,206);
      }

      #itemCont{
         padding: 50px 0;
      }

      #bigImg{
        display: none;
        position: absolute;
        width: 100%;
        z-index: 1;
      }

      #bigImg:hover{
         cursor: zoom-out;
      }
   </style>
</head>

<body>
   <img id="bigImg" src="">
   
<!--TO TOP-->
<a href="javascript:" id="return-to-top"> <span>TO TOP <i class="fas fa-long-arrow-alt-up"></i> </span></a>

<!--header-->
<header id="header1">
   <div id="hwraper">

      <h1 id="logo">
      <a href="index.html"><img src="image/etc/logo.png" alt="logo"></a>
      </h1>
      <ul id="hnavi">
         <li><a href="javascript:goList('outer')" class="cool-link">OUTER</a></li>
         <li><a href="javascript:goList('top')" class="cool-link">TOP</a></li>
         <li><a href="javascript:goList('bottom')" class="cool-link">BOTTOM</a></li>
         <li><a href="javascript:goList('acc')" class="cool-link">ACC</a></li>
         <li><a href="javascript:goList('shoes')" class="cool-link">SHOES</a></li>           
      </ul>

      <!--media toggle:hidden now-->
      <div id="mediaTog">
         <label>
         <input id="mediaCheck" type='checkbox'>
            <span class='menu'>
               <span class='hamburger'></span>
            </span>
         <ul id="labelul">
            <li><a href="javascript:goList('outer')">OUTER</a></li>
            <li><a href="javascript:goList('top')">TOP</a></li>
            <li><a href="javascript:goList('bottom')">BOTTOM</a></li>
            <li><a href="javascript:goList('acc')">ACC</a></li>
            <li><a href="javascript:goList('shoes')">SHOES</a></li>
         </ul>
         </label>
      </div>
      
      <div class="search" >            
         <span class="searchbox">   
          <input type="search" placeholder="Search..." />
         </span>
         <i class="fa fa-search" style="font-size:1.7em; color:Tomato"></i>            
      </div>

      <div id="icon" style="font-size:1.5em;">  
         <a href="saveList.html"><i class="far fa-heart"></i></a>
         <a href="login.html"><i class="far fa-user-circle"></i></a>
      </div>

   </div>
</header>

<!--container-->
<div class="container" id="itemCont">
   <div class="row" id="one">
      <!-- item 이미지 div -->
      <div class="col-sm-6" id="itemImgDiv">
         <img src="">
      </div>
      <!-- item 상세정보 div -->
      <div class="col-sm-6" id="infoDiv">  
         <!-- 뒤로가기 버튼 -->
         <a id="goBack" class="fas fa-arrow-left">
         </a>
         <div class="row" id="buyInfo">
            <h3 id="brandName"></h3>
            <div class="row" id="buyInfo_1">
               <h1 id="itemName" class="margin0"></h1>
               <b id="price"></b>
            </div> 
            <div class="row" id="optionDiv">

               <form action="buyAction">
                  <div class="row" id="selectDiv">
                     <div class="col-xs-4">
                        <label for="size"> </label>
                        <select name="size" id="size" class="form-control">
                           <option> 0 </option>
                           <option> 2 </option>
                           <option> 4 </option>
                           <option> 6 </option>
                        </select>
                     </div>
                     <div class="col-xs-push-1 col-xs-7">
                        <label for="color"> </label>
                        <select name="color" id="color" class="form-control">
                           <option> white </option>
                           <option> black </option>
                        </select>
                     </div>
                  </div>
   
                  <div class="row" id="buyDiv">
                     <div class="col-xs-4">
                        <a href="#" style="color:gray">view the size guide</a> 
                     </div>
                     
                     <div class="col-xs-push-1 col-xs-7">
                        <div class="col-xs-5"> 
                           <button class="btn btn-defalut btn-block" id="likeBtn">
                           SAVE <span class="glyphicon glyphicon-heart"></span>
                           </button>
                        </div>
                        <div class="col-xs-5 col-xs-push-2">
                           <button class="btn btn-primary btn-block" id="buyBtn">BUY</button>
                        </div>
                        
                     </div>
                  </div>
               </form>
            </div>
            <div class="row" id="">
                            
            </div> 
         </div>
         <div class="row" id="itemInfo">
            <p style="margin-bottom: 10px;">
               Asymmetric off-the-shoulder jumpsuit with gathered waistline &amp wide legs <br>
            </p>
            <b>Details</b><br>
            <ul style="margin-bottom: 10px;">
               <li> Asymmetric off-the-shoulder, ruffle detail</li>
               <li>Gathered belted waistline, two side pockets</li>
               <li>48% tencel, 30% linen, 24% cotton</li>
            </ul>
            <b>Size &amp Fit</b><br>
            <ul>
               <li>US sizing, true to size </li>
               <li>Fitted at the waistline, wide leg</li>
               <li>Model is 170 cm and wears a size 0</li>
            </ul>
         </div>
      </div>
   </div>
</div>
<!--container-->

<!-- 사이즈 정보 -->
<div id="sizeInfo">
   <div class="modal fade" id="myModal">
   <!-- modal-lg  | default | modal-sm  크기 조절이 가능 -->   
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
         <!--data-dismiss="modal" 이거 덕분에 모달이 닫아짐 -->
        <button type="button" class="close" data-dismiss="modal"><span>&times;</span><span class="sr-only">모달 닫기</span></button>
      </div>
      <div class="modal-body">
         <h4>SIZE CONVERSION</h4>
         <br>
         <div>The following charts will help you match the desinger's size scheme for this projuct(indicated in the dropdown)to your usual size.</div>
         <br>
           <table  id="t01" border="0" cellspacing="0" style="width: 100%">
             <caption>READY TO WEAR SIZE CHART</caption>
            <tbody>
               <colgroup>
                   <col width="10" />
                   <col width="10" />
                   <col width="10" />
                   <col width="10" />
                   <col width="10" />
                   <col width="10" />
                   <col width="10" />
                   <col width="10" />
                   
                </colgroup>
               <tr>
                  <td>French/European sizing</td>
                  <td>32</td>
                  <td>34</td>
                  <td>36</td>
                  <td>38</td>
                  <td>40</td>
                  <td>42</td>
                  <td></td>
               </tr>
               <tr>
                  <td>US sizing</td>
                  <td>00</td>
                  <td>0</td>
                  <td>2</td>
                  <td>4</td>
                  <td>6</td>
                  <td>8</td>
                  <td>10</td>
               </tr>
               <tr>
                  <td>UK sizing</td>
                  <td></td>
                  <td>6</td>
                  <td>8</td>
                  <td>10</td>
                  <td>12</td>
                  <td></td>
                  <td></td>
               </tr>
               <tr>
                  <td>European sizing</td>
                  <td></td>
                  <td>0</td>
                  <td>1</td>
                  <td>2</td>
                  <td>3</td>
                  <td></td>
                  <td></td>
               </tr>
               <tr>
                  <td>S-M-L sizing</td>
                  <td></td>
                  <td>xs</td>
                  <td>s</td>
                  <td>m</td>
                  <td>l</td>
                  <td></td>
                  <td></td>
               </tr>
               <tr>
                  <td>Jeans sizing</td>
                  <td>23</td>
                  <td>24-25</td>
                  <td>26-27</td>
                  <td>28-29</td>
                  <td>30</td>
                  <td>31</td>
                  <td></td>
               </tr>
            </tbody>
         </table>
            </div>       
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal
</div>
 -->
<!--container-->


<!--footer-->
<footer id="footer1">
   <div id="fwarper">
      <ul id="lists">
         <li><a href="#">About us</a></li>
         <li><a href="#">Shipping Information</a></li>
         <li><a href="#">Return & Exchanges</a></li>
      </ul>

      <div id="btn">
         <p><a href="#">CONTACT & HELP</a></p>
         <p><a href="#">FOLLOW US</a></p>
      </div>

   </div>
</footer>
<!--end of footer-->

<script src="js/jquery-3.3.1.js"></script>
<script src="js/bootstrap.js"></script>   
<script src="js/astyle.js"></script>   
<script src="js/item.js"></script>   

<script>
   // 상품 인덱스 번호
   var aStyleItemIndex=parseInt(localStorage.aStyleItemIndex);
   // 이미지 출력
   var imageNm="0"+(aStyleItemIndex+1);
   imageNm=imageNm.substring(imageNm.length-2, imageNm.length)+".jpg";
   $("#itemImgDiv>img").attr("src","image/"+aStyleItem+"/"+imageNm);
   $("#bigImg").attr("src","image/"+aStyleItem+"/"+imageNm);

   // 상품 정보를 저장하는 변수
   var itemN=itemInfo[aStyleItemIndex].title1.toUpperCase();
   var brandN=itemInfo[aStyleItemIndex].title2.toUpperCase();
   var price=itemInfo[aStyleItemIndex].price;
   // 상품 정보 출력
   $("#brandName").text(brandN);
   $("#itemName").text(itemN);
   $("#price").text(price);
   // localStorage에 저장된 aStyleSaveList를 가져옴
   var saveList=localStorage.aStyleSaveList;
   if (saveList==undefined||saveList==""){
      saveList="[]";
   }
   // localStorage에 저장 된 좋아요 리스트를 담은 배열
   var arr=JSON.parse(saveList);
   // 좋아요 버튼 클릭한 이력을 확인
   checkLiked();

   // 상품에 좋아요 이력이 있으면 버튼색을 바꿔주는 함수
   function checkLiked(){
      var isLiked=!checkLikeList(arr);
      if(isLiked){
         $("#likeBtn").addClass("likedBtn");
      }
   }

   // 좋아요 중복시 해당 상품의 인덱스를 담는 변수
   var arrIndex;

   // 좋아요 버튼 클릭 
   $("#likeBtn").click(function(event){  
      // 중복 체크
      var isOnly=checkLikeList(arr);
      if(isOnly){
         // 최초 클릭시 localStorage에 상품의 정보를 담고 버튼색을 바꿔준다.
         arr.push({Item:aStyleItem, ItemIndex:aStyleItemIndex});
         $(this).addClass("likedBtn");
      } else{
         // 좋아요 취소시
         arr.splice(arrIndex,1);
         $(this).removeClass("likedBtn");
      }
      saveList=JSON.stringify(arr);
      localStorage.aStyleSaveList=saveList;
      event.preventDefault(); 
   })
   
   // 좋아요 상품 중복 체크 함수
   function checkLikeList(arr){
      for(var i=0; i<arr.length; i++){
         // 상품의 카테고리명과 인덱스번호가 같으면 false를 반환
         if(arr[i].Item==aStyleItem){
            if(arr[i].ItemIndex==aStyleItemIndex){
               arrIndex=i;
               return false;
            } 
         } 
      }
      return true;
   }

   // buy 버튼 클릭시 폼 제출 막기
   $("#buyBtn").click(function(event){
      event.preventDefault();
   })

    $("#buyDiv a").click(function(){
      $("#myModal").modal("show");
   });

   // 이미지 클릭시 확대해서 보여 줌
   $("#itemImgDiv>img").click(function(){
      $("#bigImg").show();
   })

   // 확대 된 이미지 클릭시 상품 정보가 보이도록
   $("#bigImg").click(function(){
      $(this).hide();
   })

   // 모달이 완전히 보여 졌을때 실행할 함수 등록 
   $("#myModal").on("shown.bs.modal", function(){});
   //모달이 완전히 숨겨졌을때 실행할 함수 등록 
   $("#myModal").on("hidden.bs.modal", function(){});

   // goBack
   $("#goBack").click(function(){
      history.back();
   })
</script>
</body>
</html>